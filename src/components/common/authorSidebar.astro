---
import { Image } from "astro:assets";
import AuthorImg from "@assets/picture.jpg";
import { getSiteStats } from "@lib/contentParser";
import LiquidGlassLess from "./LiquidGlassLess.astro";

// 获取静态模式下的统计数据
const siteStats = await getSiteStats();
// console.log("统计数据", siteStats);
// AuthorImg 已经是 ImageMetadata 类型
const authorImage = AuthorImg;
// console.log("图片数据", authorImage);
---

<!-- 作者信息 -->
<LiquidGlassLess
  heavy
  wrapperClass="dock rounded-lg p-4 my-2 mb-4"
  animation="fadeLeft"
>
  <div class="intersect:animate-fadeLeft">
    <div class="mb-4 text-center justify-items-center">
      {
        authorImage && (
          <div class="relative group mb-1">
            <div class="absolute -inset-1 bg-gradient-to-r from-orange-500 via-indigo-500 to-green-500 rounded-full blur opacity-30 group-hover:opacity-50 transition duration-300" />
            <a href="/page/about">
              <Image
                class="relative  w-20 h-20 rounded-full border-4 border-white/30 shadow-xl transform group-hover:scale-105 transition-all duration-300"
                src={authorImage}
                alt="Tidus的头像"
                width={112}
                height={112}
                loading="lazy"
                format="webp"
                quality={75}
                decoding="async"
              />
            </a>
          </div>
        )
      }
      <h1
        class="text-xl lg:text-xl font-bold text-txt-p dark:text-darkmode-txt-p mb-2"
      >
        Tidus
      </h1>
      <div
        class="w-20 h-1 bg-gradient-to-r from-orange-500 to-indigo-500 mx-auto lg:mx-0 rounded-full mb-4"
        style="margin:auto;"
      >
      </div>
    </div>
    <div class="flex flex-row justify-between px-4">
      <div class="flex flex-col items-center">
        <div>分类</div>
        <div>{siteStats.categories}</div>
      </div>

      <div class="flex flex-col items-center">
        <div>标签</div>
        <div>{siteStats.tags}</div>
      </div>

      <div class="flex flex-col items-center">
        <div>文章</div>
        <div>{siteStats.articles}</div>
      </div>
    </div>
  </div>
</LiquidGlassLess>
